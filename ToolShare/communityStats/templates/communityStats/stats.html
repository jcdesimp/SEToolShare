{% extends "base.html" %}
{% block content %}
        <!---
			<h2><b>Number of Users</b></h2>
			<p>{{numUsers}}</p>
			<h2><b>Users</b></h2>
			-->

            <!------- User Listing --------
			{% for u in allUsers %}
			<tr>
				{% if not u.user.is_staff %}
				<td><a href='/sharecenter/user/{{u.user.username}}'> {{u.user.username}}</a></td>
				{% endif %}
			</tr>
			{% endfor %}
			-->


            <!--
			<h2><b>Most Active Lender</b></h2>
			<td><a href='/sharecenter/user/{{highLender.user.username}}'> {{highLender.user.username}}</a></td>
			<h2><b>Most Active Borrower</b></h2>
			<td><a href='/sharecenter/user/{{highBorrower.user.username}}'> {{highBorrower.user.username}}</a></td>
			<h2><b>Most Used Tool</b></h2>
			<td><a href='/sharecenter/tool/{{mostUsedTool.id}}'> {{mostUsedTool.name}}</a></td>
			<h2><b>Recently Used Tool</b></h2>
			<td><a href='/sharecenter/tool/{{mostRecentlyUsedTool.id}}'> {{mostRecentlyUsedTool.name}}</a></td>
			-->
<div class="container" style="text-align: center">
		<div class="container col-md-6 pull-left" style="background-color: #FFFFFF; border-radius: 5px; padding: 15px; margin: 2px; max-width: 550px;">

             <h1 class="page-header" style="text-align: center; margin-top: -5px">Tool Stats</h1>


                <div class="panel-group" id="toolStats">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a data-toggle="collapse" data-parent="#toolStats" href="#mostBorrowedTools">
                                    Most Borrowed Tools
                                </a>
                            </h4>
                        </div>

                        <div id="mostBorrowedTools" class="panel-collapse collapse in">
                            <div class="panel-body">
                                {% if mostBorrowed|length == 0 %}
                                    No Tools
                                {% else %}
                                <table class="table table-hover bordered " style="table-layout: fixed; word-wrap: break-word; margin-bottom: -10px ">
                                    <thead>
                                        <tr>
                                            <th style="max-width: 50px">No.</th>
                                            <th style="min-width: 200px">Name</th>
                                            <th style="min-width: 80px">Borrow Count</th>
                                            <th style="width: 60px"></th>
                                        </tr>
                                    </thead>
                                    {% for t in mostBorrowed %}
                                        <tr>
                                            <td style="text-align: left">{{ forloop.counter}}.</td>
                                            <td style="text-align: left">{{t.name}}</td>
                                            <td style="text-align: left">{{t.timesUsed}} times</td>
                                            <td><a class="btn btn-default" href="/sharecenter/tool/{{t.id}}/"><span class="glyphicon glyphicon-info-sign" style="vertical-align: top"></span> </a> </td>
                                        </tr>
                                    {% endfor %}
                                </table>
                                {% endif %}


                            </div>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a data-toggle="collapse" data-parent="#toolStats" href="#leastBorrowedTools">
                                    Least Borrowed Tools
                                </a>
                            </h4>
                        </div>
                        <div id="leastBorrowedTools" class="panel-collapse collapse">
                            <div class="panel-body">
                                {% if leastBorrowed|length == 0 %}
                                    No Tools
                                {% else %}
                                <table class="table table-hover bordered " style="table-layout: fixed; word-wrap: break-word; margin-bottom: -10px ">
                                    <thead>
                                        <tr>
                                            <th style="max-width: 50px">No.</th>
                                            <th style="min-width: 200px">Name</th>
                                            <th style="min-width: 80px">Borrow Count</th>
                                            <th style="width: 60px"></th>
                                        </tr>
                                    </thead>
                                    {% for t in leastBorrowed %}
                                        <tr>
                                            <td style="text-align: left">{{ forloop.counter}}.</td>
                                            <td style="text-align: left">{{t.name}}</td>
                                            <td style="text-align: left">{{t.timesUsed}} times</td>
                                            <td><a class="btn btn-default" href="/sharecenter/tool/{{t.id}}/"><span class="glyphicon glyphicon-info-sign" style="vertical-align: top"></span> </a> </td>
                                        </tr>
                                    {% endfor %}
                                </table>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a data-toggle="collapse" data-parent="#toolStats" href="#recentlyBorrowedTools">
                                    Recently Borrowed Tools
                                </a>
                            </h4>
                        </div>
                        <div id="recentlyBorrowedTools" class="panel-collapse collapse">
                            <div class="panel-body">
                                {% if recentlyBorrowed|length == 0 %}
                                    No Tools
                                {% else %}
                                <table class="table table-hover bordered " style="table-layout: fixed; word-wrap: break-word; margin-bottom: -10px ">
                                    <thead>
                                        <tr>
                                            <th style="max-width: 50px">No.</th>
                                            <th style="min-width: 200px">Name</th>
                                            <th style="min-width: 80px">Borrow Date</th>
                                            <th style="width: 60px"></th>
                                        </tr>
                                    </thead>
                                    {% for t in recentlyBorrowed %}
                                        <tr>
                                            <td style="text-align: left">{{forloop.counter}}.</td>
                                            <td style="text-align: left">{{t.tool.name}}</td>
                                            <td style="text-align: left">{{t.startDate}}</td>
                                            <td><a class="btn btn-default" href="/sharecenter/tool/{{t.tool.id}}/"><span class="glyphicon glyphicon-info-sign" style="vertical-align: top"></span> </a> </td>
                                        </tr>
                                    {% endfor %}
                                </table>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
		</div>

        <!-- User Stats Panel -->
        <div class="container col-md-6 pull-right" style="background-color: #FFFFFF; border-radius: 5px; padding: 15px; margin: 2px; max-width: 550px;">
            <h1 class="page-header" style="text-align: center; margin-top: -5px">User Stats</h1>


                <div class="panel-group" id="userStats">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a data-toggle="collapse" data-parent="#userStats" href="#topLenders">
                                    Top Lenders
                                </a>
                            </h4>
                        </div>
                        <div id="topLenders" class="panel-collapse collapse in">
                            <div class="panel-body">
                                {% if topLenders|length == 0 %}
                                    No Users
                                {% else %}
                                <table class="table table-hover bordered " style="table-layout: fixed; word-wrap: break-word; margin-bottom: -10px ">
                                    <thead>
                                        <tr>
                                            <th style="max-width: 50px">No.</th>
                                            <th style="min-width: 200px">Username</th>
                                            <th style="min-width: 80px">Times Lent</th>
                                            <th style="width: 60px"></th>
                                        </tr>
                                    </thead>
                                    {% for u in topLenders %}
                                        <tr>
                                            <td style="text-align: left">{{forloop.counter}}.</td>
                                            <td style="text-align: left">{{u.user.username}}</td>
                                            <td style="text-align: left">{{u.timesLent}}</td>
                                            <td><a class="btn btn-default" href="/sharecenter/user/{{u.user.username}}/"><span class="glyphicon glyphicon-info-sign" style="vertical-align: top"></span> </a> </td>
                                        </tr>
                                    {% endfor %}
                                </table>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a data-toggle="collapse" data-parent="#userStats" href="#topBorrowers">
                                    Top Borrowers
                                </a>
                            </h4>
                        </div>
                        <div id="topBorrowers" class="panel-collapse collapse">
                            <div class="panel-body">
                                {% if topBorrowers|length == 0 %}
                                    No Users
                                {% else %}
                                <table class="table table-hover bordered " style="table-layout: fixed; word-wrap: break-word; margin-bottom: -10px ">
                                    <thead>
                                        <tr>
                                            <th style="max-width: 50px">No.</th>
                                            <th style="min-width: 200px">Username</th>
                                            <th style="min-width: 80px">Times Borrowed</th>
                                            <th style="width: 60px"></th>
                                        </tr>
                                    </thead>
                                    {% for u in topBorrowers %}
                                        <tr>
                                            <td style="text-align: left">{{forloop.counter}}.</td>
                                            <td style="text-align: left">{{u.user.username}}</td>
                                            <td style="text-align: left">{{u.timesBorrowed}}</td>
                                            <td><a class="btn btn-default" href="/sharecenter/user/{{u.user.username}}/"><span class="glyphicon glyphicon-info-sign" style="vertical-align: top"></span> </a> </td>
                                        </tr>
                                    {% endfor %}
                                </table>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a data-toggle="collapse" data-parent="#userStats" href="#mostActive">
                                    Most Active Overall Users
                                </a>
                            </h4>
                        </div>
                        <div id="mostActive" class="panel-collapse collapse">
                            <div class="panel-body">
                                {% if mostActivity|length == 0 %}
                                    No Users
                                {% else %}
                                <table class="table table-hover bordered " style="table-layout: fixed; word-wrap: break-word; margin-bottom: -10px ">
                                    <thead>
                                        <tr>
                                            <th style="width: 40px">No.</th>
                                            <th style="min-width: 200px">Username</th>
                                            <th style="min-width: 80px">Times Borrowed</th>
                                            <th style="min-width: 80px">Times Lent</th>
                                            <th style="width: 60px"></th>
                                        </tr>
                                    </thead>
                                    {% for u in mostActivity %}
                                        <tr>
                                            <td style="text-align: left">{{forloop.counter}}.</td>
                                            <td style="text-align: left">{{u.user.username}}</td>
                                            <td style="text-align: left">{{u.timesBorrowed}}</td>
                                            <td style="text-align: left">{{u.timesLent}}</td>
                                            <td><a class="btn btn-default" href="/sharecenter/user/{{u.user.username}}/"><span class="glyphicon glyphicon-info-sign" style="vertical-align: top"></span> </a> </td>
                                        </tr>
                                    {% endfor %}
                                </table>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>


        </div>
	</div>
{% endblock %}